{
  "hash": "15d710b094086cb5128442e874f844b2",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Adherencia HM en el Centro de Simulación\"\nsubtitle: \"Adherencia de la higiene de manos por escenario\"\nauthor: \n  - name: \"Mario Camacho\"\n    affiliation: \"Facultad de Medicina\"\n  - name: \"Fernando Neria\"\n    affiliation: \"Facultad de Medicina\"\ndate: \"2026-01-07\"\ndate-modified: last-modified\noutput:\n  html_document:\n     toc-title: \"Ingesta de datos\"\n     toc: true\n     toc_depth: 2\n---\n<button id=\"scroll-top\" onclick=\"window.scrollTo({top: 0, behavior: 'smooth'});\">\n  ↑ Inicio\n</button>\n- [Inicio](../index.html)\n- [Ingesta de datos](00_main.html)\n- [Resumen y gráficos descriptivos](01_eda.html)\n- [Adherencia de la higiene de manos por curso](02_prevalencia_por_curso.html)\n- [Adherencia de la higiene de manos por escenario](02_prevalencia_por_escenario.html)\n\n\n\n\n\n# Prevalencia de higiene de manos\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"false\"}\ntabla_prev <- table(data$escenario, data$accion)\nprevalencia_niveles <- prop.table(tabla_prev, margin = 1)[, \"1\"]\nprevalencia <- data.frame(Escenario = factor(names(prevalencia_niveles), levels = names(prevalencia_niveles)),\n                          Prevalencia = as.numeric(prevalencia_niveles))\n\nggplot(prevalencia, aes(x = Escenario, y = Prevalencia)) +\n  geom_col(fill = \"steelblue\", width = 0.7) +\n  geom_text(\n    aes(label = paste0(round(Prevalencia * 100, 1), \"%\")),\n    vjust = -0.5\n  ) +\n  labs(\n    x = \"Escenario\",\n    y = \"Prevalencia\",\n    title = \"Prevalencia de higiene de manos por escenario\"\n  ) +\n  ylim(0, max(prevalencia$Prevalencia) * 1.2) +\n  scale_x_discrete(labels = function(x) stringr::str_wrap(x, width = 15)) +\n  theme_minimal() +\n  theme(axis.text.x = element_text(size = 10), panel.grid = element_blank())\n```\n\n::: {.cell-output-display}\n![](02_prevalencia_por_escenario_files/figure-html/unnamed-chunk-1-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n## Estimaciones puntuales e IC de la prevalencia\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"false\"}\nic_exacto_clopper_Pearson <- function(x, n, alpha = 0.05) {\n  ic_CP <- binom.test(x, n, conf.level = 1 - alpha)\n  return(c(x/n, ic_CP$conf.int))\n}\n\nics <- t(apply(tabla_prev, 1, function(x) ic_exacto_clopper_Pearson(x[\"1\"], sum(x)))) |> as.data.frame()\ncolnames(ics) <- c(\"Prevalencia\", \"IC_95_inf\", \"IC_95_sup\")\ncat(\"Prevalencias con intervalos de confianza del 95%:\\n\", capture.output(round(ics, 3)), sep=\"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nPrevalencias con intervalos de confianza del 95%:\n\n                       Prevalencia IC_95_inf IC_95_sup\nBox                          0.038     0.024     0.058\nConsulta                     0.375     0.323     0.431\nProcedimiento invasivo       0.461     0.398     0.526\n```\n\n\n:::\n\n```{.r .cell-code  code-fold=\"false\"}\nics$Escenario <- factor(rownames(ics), levels = rownames(ics))\n\nggplot(ics, aes(x = Escenario, y = Prevalencia)) +\n  geom_point(size = 3) +\n  geom_errorbar(aes(ymin = IC_95_inf, ymax = IC_95_sup), \n                width = 0.1) +\n  labs(x = \"Escenario\", y = \"Prevalenciade HM\", \n       title = \"Prevalencia de la HM con IC del 95 %\") +\n  scale_x_discrete(labels = function(x) stringr::str_wrap(x, width = 15)) +\n  theme_minimal() +\n  theme(axis.text.x = element_text(size = 8), panel.grid = element_blank())\n```\n\n::: {.cell-output-display}\n![](02_prevalencia_por_escenario_files/figure-html/unnamed-chunk-2-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n## Independencia entre HM y Escenario\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"false\"}\n# Prueba de independencia de la Chi-cuadrado\n\n# H0: las variables escenario y acción son independientes.\n# H1: las variables escenario y acción son dependientes.\n\ncrosstable(\n  data,\n  cols = \"escenario\",\n  by = \"accion\",\n  total = \"row\",\n  test = TRUE\n) |>\n  as_flextable()\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"tabwid\"><style>.cl-2fe3ec9c{table-layout:auto;}.cl-2fc90dc8{font-family:'Arial';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-2fc90dfa{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-2fd53fbc{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-2fd53fd0{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-2fd58ce2{background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(0, 0, 0, 1.00);border-top: 1.5pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-2fd58cf6{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1.5pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-2fd58d0a{background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-2fd58d14{background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-2fd58d1e{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-2fe3ec9c'><thead><tr style=\"overflow-wrap:break-word;\"><th  rowspan=\"2\"class=\"cl-2fd58ce2\"><p class=\"cl-2fd53fbc\"><span class=\"cl-2fc90dc8\">label</span></p></th><th  rowspan=\"2\"class=\"cl-2fd58ce2\"><p class=\"cl-2fd53fbc\"><span class=\"cl-2fc90dc8\">variable</span></p></th><th  colspan=\"2\"class=\"cl-2fd58cf6\"><p class=\"cl-2fd53fbc\"><span class=\"cl-2fc90dc8\">accion</span></p></th><th  rowspan=\"2\"class=\"cl-2fd58ce2\"><p class=\"cl-2fd53fbc\"><span class=\"cl-2fc90dc8\">Total</span></p></th><th  rowspan=\"2\"class=\"cl-2fd58ce2\"><p class=\"cl-2fd53fbc\"><span class=\"cl-2fc90dc8\">test</span></p></th></tr><tr style=\"overflow-wrap:break-word;\"><th class=\"cl-2fd58d0a\"><p class=\"cl-2fd53fbc\"><span class=\"cl-2fc90dc8\">0</span></p></th><th class=\"cl-2fd58d0a\"><p class=\"cl-2fd53fbc\"><span class=\"cl-2fc90dc8\">1</span></p></th></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td  rowspan=\"3\"class=\"cl-2fd58d14\"><p class=\"cl-2fd53fd0\"><span class=\"cl-2fc90dfa\">escenario</span></p></td><td class=\"cl-2fd58d1e\"><p class=\"cl-2fd53fd0\"><span class=\"cl-2fc90dfa\">Box</span></p></td><td class=\"cl-2fd58d1e\"><p class=\"cl-2fd53fd0\"><span class=\"cl-2fc90dfa\">550 (96.15%)</span></p></td><td class=\"cl-2fd58d1e\"><p class=\"cl-2fd53fd0\"><span class=\"cl-2fc90dfa\">22 (3.85%)</span></p></td><td class=\"cl-2fd58d1e\"><p class=\"cl-2fd53fd0\"><span class=\"cl-2fc90dfa\">572 (50.09%)</span></p></td><td  rowspan=\"3\"class=\"cl-2fd58d14\"><p class=\"cl-2fd53fd0\"><span class=\"cl-2fc90dfa\">p value: &lt;0.0001 </span><br><span class=\"cl-2fc90dfa\">(Pearson's Chi-squared test)</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-2fd58d1e\"><p class=\"cl-2fd53fd0\"><span class=\"cl-2fc90dfa\">Consulta</span></p></td><td class=\"cl-2fd58d1e\"><p class=\"cl-2fd53fd0\"><span class=\"cl-2fc90dfa\">203 (62.46%)</span></p></td><td class=\"cl-2fd58d1e\"><p class=\"cl-2fd53fd0\"><span class=\"cl-2fc90dfa\">122 (37.54%)</span></p></td><td class=\"cl-2fd58d1e\"><p class=\"cl-2fd53fd0\"><span class=\"cl-2fc90dfa\">325 (28.46%)</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-2fd58d14\"><p class=\"cl-2fd53fd0\"><span class=\"cl-2fc90dfa\">Procedimiento invasivo</span></p></td><td class=\"cl-2fd58d14\"><p class=\"cl-2fd53fd0\"><span class=\"cl-2fc90dfa\">132 (53.88%)</span></p></td><td class=\"cl-2fd58d14\"><p class=\"cl-2fd53fd0\"><span class=\"cl-2fc90dfa\">113 (46.12%)</span></p></td><td class=\"cl-2fd58d14\"><p class=\"cl-2fd53fd0\"><span class=\"cl-2fc90dfa\">245 (21.45%)</span></p></td></tr></tbody></table></div>\n```\n\n:::\n\n```{.r .cell-code  code-fold=\"false\"}\n# Con p-valor menor a 0.05 rechazamos independencia.\n# No podemos afirmar que la prevalencia de la HM es independiente del escenario del examen\n```\n:::\n\n\n## Comparación por pares\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"false\"}\n# Comparación por pares con corrección de Bonferroni.\n(comparaciones <- comparar_pares(tabla_prev))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  Escenario_1            Escenario_2 Prev_1 Prev_2 Diferencia      p_valor   p_ajustado Significativo\n1         Box               Consulta  0.038  0.375      0.337 2.597712e-39 7.793137e-39             *\n2         Box Procedimiento invasivo  0.038  0.461      0.423 1.348405e-49 4.045216e-49             *\n3    Consulta Procedimiento invasivo  0.375  0.461      0.086 4.825237e-02 1.447571e-01              \n```\n\n\n:::\n\n```{.r .cell-code  code-fold=\"false\"}\n# Diferencias significativas\ndif_significativas <- comparaciones[comparaciones$p_ajustado < 0.05, ]\nif(nrow(dif_significativas) > 0) {\n  print(\"Diferencias significativas (p < 0.05):\")\n  print(dif_significativas)\n} else {\n  print(\"No hay diferencias significativas después de corrección\")\n}\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Diferencias significativas (p < 0.05):\"\n  Escenario_1            Escenario_2 Prev_1 Prev_2 Diferencia      p_valor   p_ajustado Significativo\n1         Box               Consulta  0.038  0.375      0.337 2.597712e-39 7.793137e-39             *\n2         Box Procedimiento invasivo  0.038  0.461      0.423 1.348405e-49 4.045216e-49             *\n```\n\n\n:::\n:::\n\n",
    "supporting": [
      "02_prevalencia_por_escenario_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/tabwid-1.1.3/tabwid.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/tabwid-1.1.3/tabwid.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}